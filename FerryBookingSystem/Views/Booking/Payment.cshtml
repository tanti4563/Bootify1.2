@{
    ViewBag.Title = "Payment";
}

<h2>Payment</h2>

<div class="panel panel-primary">
    <div class="panel-heading">
        <h3 class="panel-title">Payment Details</h3>
    </div>
    <div class="panel-body">
        <div class="alert alert-info">
            <p><i class="glyphicon glyphicon-time"></i> Your seats are reserved for 15 minutes to complete payment.</p>
            <p>Current time: @ViewBag.CurrentTime</p>
        </div>

        <div class="row">
            <div class="col-md-8">
                <div class="well">
                    <h4>Booking Summary</h4>
                    <p>Booking Code: <strong>@ViewBag.BookingCode</strong></p>
                    <p>Total Amount: <strong>@ViewBag.Amount.ToString("N0") VND</strong></p>
                </div>

                <div class="alert alert-warning">
                    <strong>DEMO MODE:</strong> This is a test payment environment.
                    No real transactions will be processed.
                </div>

                <!-- Direct Payment Button for Testing -->
                <div class="well">
                    <h4>Test Payment Option</h4>
                    <p>Click the button below to simulate a successful payment:</p>
                    <a href="@Url.Action("TestPayment", "Booking", new { bookingCode = ViewBag.BookingCode })"
                       class="btn btn-success btn-lg">
                        Complete Test Payment for @ViewBag.Amount.ToString("N0") VND
                    </a>
                </div>

                <!-- Card Payment Form (Just for Display) -->
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">Credit Card Details (For Display Only)</h4>
                    </div>
                    <div class="panel-body">
                        <form>
                            <div class="form-group">
                                <label>Card Number</label>
                                <input type="text" class="form-control" value="4111 1111 1111 1111" readonly />
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Expiry Date</label>
                                        <input type="text" class="form-control" value="12/25" readonly />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>CVV</label>
                                        <input type="text" class="form-control" value="123" readonly />
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Cardholder Name</label>
                                <input type="text" class="form-control" value="@User.Identity.Name" readonly />
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Current User</h3>
                    </div>
                    <div class="panel-body">
                        <p>Logged in as: <strong>@User.Identity.Name</strong></p>
                        <p>Current time (UTC): <strong>@DateTime.UtcNow.ToString("yyyy-MM-dd HH:mm:ss")</strong></p>
                    </div>
                </div>

                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Testing Instructions</h3>
                    </div>
                    <div class="panel-body">
                        <p><strong>Note:</strong> This is a test environment.</p>
                        <ol>
                            <li>Click "Complete Test Payment" to simulate payment</li>
                            <li>You'll be redirected to the booking confirmation page</li>
                            <li>All bookings will be marked as successfully paid</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>